<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>etcd-clj.core documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Etcd-clj 0.2.3 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>etcd-clj</span></div></div></li><li class="depth-2 current"><a href="etcd-clj.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="etcd-clj.core.html#var-*api-version*"><div class="inner"><span>*api-version*</span></div></a></li><li class="depth-1"><a href="etcd-clj.core.html#var-*etcd-config*"><div class="inner"><span>*etcd-config*</span></div></a></li><li class="depth-1"><a href="etcd-clj.core.html#var-*timeout*"><div class="inner"><span>*timeout*</span></div></a></li><li class="depth-1"><a href="etcd-clj.core.html#var-api-req"><div class="inner"><span>api-req</span></div></a></li><li class="depth-1"><a href="etcd-clj.core.html#var-default-config"><div class="inner"><span>default-config</span></div></a></li><li class="depth-1"><a href="etcd-clj.core.html#var-del"><div class="inner"><span>del</span></div></a></li><li class="depth-1"><a href="etcd-clj.core.html#var-get"><div class="inner"><span>get</span></div></a></li><li class="depth-1"><a href="etcd-clj.core.html#var-machines"><div class="inner"><span>machines</span></div></a></li><li class="depth-1"><a href="etcd-clj.core.html#var-mkdir"><div class="inner"><span>mkdir</span></div></a></li><li class="depth-1"><a href="etcd-clj.core.html#var-set"><div class="inner"><span>set</span></div></a></li><li class="depth-1"><a href="etcd-clj.core.html#var-set.21"><div class="inner"><span>set!</span></div></a></li><li class="depth-1"><a href="etcd-clj.core.html#var-set-connection.21"><div class="inner"><span>set-connection!</span></div></a></li><li class="depth-1"><a href="etcd-clj.core.html#var-sget"><div class="inner"><span>sget</span></div></a></li><li class="depth-1"><a href="etcd-clj.core.html#var-slist"><div class="inner"><span>slist</span></div></a></li><li class="depth-1"><a href="etcd-clj.core.html#var-stats-leader"><div class="inner"><span>stats-leader</span></div></a></li><li class="depth-1"><a href="etcd-clj.core.html#var-stats-self"><div class="inner"><span>stats-self</span></div></a></li><li class="depth-1"><a href="etcd-clj.core.html#var-stats-store"><div class="inner"><span>stats-store</span></div></a></li><li class="depth-1"><a href="etcd-clj.core.html#var-version"><div class="inner"><span>version</span></div></a></li><li class="depth-1"><a href="etcd-clj.core.html#var-wait"><div class="inner"><span>wait</span></div></a></li><li class="depth-1"><a href="etcd-clj.core.html#var-with-connection"><div class="inner"><span>with-connection</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">etcd-clj.core</h2><pre class="doc">For detailed API see <a href="https://github.com/coreos/etcd/blob/master/Documentation/api.md">https://github.com/coreos/etcd/blob/master/Documentation/api.md</a>

`get`, `set`, `del`, `wait`, `mkdir` functions accept :callback argument.
If it is provided, fn immediately returns with a promise.
Callback will be called on response.</pre><div class="public anchor" id="var-*api-version*"><h3>*api-version*</h3><div class="usage"></div><pre class="doc"></pre><div class="src-link"><a href="https://github.com/narma/etcd-clj/blob/master/src/etcd_clj/core.clj#L19">view source</a></div></div><div class="public anchor" id="var-*etcd-config*"><h3>*etcd-config*</h3><div class="usage"></div><pre class="doc">Connection config
</pre><div class="src-link"><a href="https://github.com/narma/etcd-clj/blob/master/src/etcd_clj/core.clj#L16">view source</a></div></div><div class="public anchor" id="var-*timeout*"><h3>*timeout*</h3><div class="usage"></div><pre class="doc">Connection and read timeout
</pre><div class="src-link"><a href="https://github.com/narma/etcd-clj/blob/master/src/etcd_clj/core.clj#L18">view source</a></div></div><div class="public anchor" id="var-api-req"><h3>api-req</h3><div class="usage"><code>(api-req method path &amp; {:keys [callback], :as opts})</code></div><pre class="doc">Makes an api call, wraps callback with parsing response body if it is provided
</pre><div class="src-link"><a href="https://github.com/narma/etcd-clj/blob/master/src/etcd_clj/core.clj#L63">view source</a></div></div><div class="public anchor" id="var-default-config"><h3>default-config</h3><div class="usage"></div><pre class="doc"></pre><div class="src-link"><a href="https://github.com/narma/etcd-clj/blob/master/src/etcd_clj/core.clj#L15">view source</a></div></div><div class="public anchor" id="var-del"><h3>del</h3><div class="usage"><code>(del key &amp; {:keys [recursive callback dir prev-value prev-index], :or {recursive false}, :as opts})</code></div><pre class="doc">Delete a key.
Options:
:recursive - delete key recursively
:dir       - delete a dir
:prev-value
:prev-index - CAD conditions
:callback 
</pre><div class="src-link"><a href="https://github.com/narma/etcd-clj/blob/master/src/etcd_clj/core.clj#L124">view source</a></div></div><div class="public anchor" id="var-get"><h3>get</h3><div class="usage"><code>(get key &amp; {:keys [recursive wait wait-index callback sorted], :or {recursive false, wait false}})</code></div><pre class="doc">Get key from etcd.
Options:
:callback   - return promise immediately with a promise
:wait       - wait a change, it&apos;s etcd feature
:wait-index - wait for a concrete index
:recursive  - get content recursively
:sorted     - returns result in sorted order</pre><div class="src-link"><a href="https://github.com/narma/etcd-clj/blob/master/src/etcd_clj/core.clj#L103">view source</a></div></div><div class="public anchor" id="var-machines"><h3>machines</h3><div class="usage"><code>(machines)</code></div><pre class="doc">return list of connected machines
</pre><div class="src-link"><a href="https://github.com/narma/etcd-clj/blob/master/src/etcd_clj/core.clj#L161">view source</a></div></div><div class="public anchor" id="var-mkdir"><h3>mkdir</h3><div class="usage"><code>(mkdir key &amp; {:as opts})</code></div><pre class="doc">`set` with implicit :dir true and without value
</pre><div class="src-link"><a href="https://github.com/narma/etcd-clj/blob/master/src/etcd_clj/core.clj#L155">view source</a></div></div><div class="public anchor" id="var-set"><h3>set</h3><div class="usage"><code>(set key value &amp; {:keys [ttl dir callback order prev-value prev-index prev-exist], :as opts, :or {dir false}})</code></div><pre class="doc">Sets key to value.
Options:
:dir        - create a dir
:ttl        - set ttl with a seconds, use `nil` for remove tll
:prev-value
:prev-index
:prev-exist - conditional arguments, see etcd API for usage
:order      - Creating an in-order key in that dir
</pre><div class="src-link"><a href="https://github.com/narma/etcd-clj/blob/master/src/etcd_clj/core.clj#L77">view source</a></div></div><div class="public anchor" id="var-set.21"><h3>set!</h3><div class="usage"><code>(set! &amp; args)</code></div><pre class="doc">Same as set, but throws exception on error
</pre><div class="src-link"><a href="https://github.com/narma/etcd-clj/blob/master/src/etcd_clj/core.clj#L197">view source</a></div></div><div class="public anchor" id="var-set-connection.21"><h3>set-connection!</h3><div class="usage"><code>(set-connection! {:keys [protocol host port]})</code></div><pre class="doc">Defaults for :port 4001, :host &quot;127.0.0.1&quot;, :protocol &quot;http&quot;
</pre><div class="src-link"><a href="https://github.com/narma/etcd-clj/blob/master/src/etcd_clj/core.clj#L21">view source</a></div></div><div class="public anchor" id="var-sget"><h3>sget</h3><div class="usage"><code>(sget &amp; args)</code></div><pre class="doc">Returns only value for a key (for dirs returns nil).
Throws an exception on errors.
Use get for advanced usage.</pre><div class="src-link"><a href="https://github.com/narma/etcd-clj/blob/master/src/etcd_clj/core.clj#L206">view source</a></div></div><div class="public anchor" id="var-slist"><h3>slist</h3><div class="usage"><code>(slist key &amp; {:keys [recursive with-dirs], :or {recursive false, with-dirs true}})</code></div><pre class="doc">Lists content of directory. Returns a hash-map.
Options:
 :recursive     - lists subdirectories recursively, default is false.
 :with-dirs     - makes sence only when option :recursive is false
                  includes dirs in result with nil values.
                  Default is true.
</pre><div class="src-link"><a href="https://github.com/narma/etcd-clj/blob/master/src/etcd_clj/core.clj#L217">view source</a></div></div><div class="public anchor" id="var-stats-leader"><h3>stats-leader</h3><div class="usage"><code>(stats-leader)</code></div><pre class="doc">leader stats
</pre><div class="src-link"><a href="https://github.com/narma/etcd-clj/blob/master/src/etcd_clj/core.clj#L166">view source</a></div></div><div class="public anchor" id="var-stats-self"><h3>stats-self</h3><div class="usage"><code>(stats-self)</code></div><pre class="doc">self stat
</pre><div class="src-link"><a href="https://github.com/narma/etcd-clj/blob/master/src/etcd_clj/core.clj#L171">view source</a></div></div><div class="public anchor" id="var-stats-store"><h3>stats-store</h3><div class="usage"><code>(stats-store)</code></div><pre class="doc">store stat
</pre><div class="src-link"><a href="https://github.com/narma/etcd-clj/blob/master/src/etcd_clj/core.clj#L176">view source</a></div></div><div class="public anchor" id="var-version"><h3>version</h3><div class="usage"><code>(version)</code></div><pre class="doc">returns a hash-map version even for old etcd.
keys: :internalVersion, :releaseVersion</pre><div class="src-link"><a href="https://github.com/narma/etcd-clj/blob/master/src/etcd_clj/core.clj#L181">view source</a></div></div><div class="public anchor" id="var-wait"><h3>wait</h3><div class="usage"><code>(wait key &amp; {:as opts})</code></div><pre class="doc">Immediately returns promise if :callback was provided
Otherwise it is blocked until response is ready. 
In this case you may want to use (future).

get with implicit :wait true</pre><div class="src-link"><a href="https://github.com/narma/etcd-clj/blob/master/src/etcd_clj/core.clj#L145">view source</a></div></div><div class="public anchor" id="var-with-connection"><h3>with-connection</h3><h4 class="type">macro</h4><div class="usage"><code>(with-connection config &amp; body)</code></div><pre class="doc"></pre><div class="src-link"><a href="https://github.com/narma/etcd-clj/blob/master/src/etcd_clj/core.clj#L33">view source</a></div></div></div></body></html>